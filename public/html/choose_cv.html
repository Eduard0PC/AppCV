<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Selecciona el Nivel de tu CV</title>
  <link rel="stylesheet" href="/css/choose.css">
  <style>
    /* Puedes incluir estilos adicionales aquí */
  </style>
</head>
<body>
  <header>
    <h1>Selecciona el Nivel de tu CV</h1>
  </header>
  <main>
    <h2>Escoge el nivel de tu CV</h2>
    <div class="cv-level-options">
      
      <!-- CV Básico -->
      <div class="card">
        <h3>BÁSICO</h3>
        <ul>
          <li>Formato cronológico tradicional.</li>
          <li>Lista experiencia y estudios de lo más reciente a lo más antiguo.</li>
          <li>Ideal para trayectorias laborales estables.</li>
          <li>Destaca evolución profesional.</li>
        </ul>
        <a href="/basic" class="btn-card">Siguiente</a>
      </div>
  
      <!-- CV Intermedio -->
      <div class="card">
        <h3>INTERMEDIO</h3>
        <ul>
          <li>Organizado por habilidades y competencias.</li>
          <li>Agrupa logros y experiencias en categorías.</li>
          <li>Ideal para cambio de sector o historial irregular.</li>
          <li>Útil si no tienes experiencia directa.</li>
        </ul>
        <a href="/inter" class="btn-card">Siguiente</a>
      </div>
  
      <!-- CV Avanzado (sólo para usuarios premium) -->
      <div class="card card-advanced">
        <h3>AVANZADO</h3>
        <ul>
          <li>Combina cronológico y funcional.</li>
          <li>Comienza con habilidades y logros clave.</li>
          <li>Incluye experiencia laboral en orden inverso.</li>
          <li>Ideal para profesionales con amplia experiencia.</li>
        </ul>
        <a href="/advance" class="btn-card advanced-link">Siguiente</a>
      </div>
  
    </div>
  </main>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Realiza un fetch al endpoint para obtener el email del usuario autenticado
      fetch('/api/user')
        .then(response => {
          if (!response.ok) {
            throw new Error('Usuario no autenticado');
          }
          return response.json();
        })
        .then(data => {
          // Asigna el email a window.userEmail para otros usos
          window.userEmail = data.email;
          // Si el usuario es free, se cambia el enlace de la tarjeta Avanzada
          if (window.userEmail === 'free@example.com') {
            const advancedLink = document.querySelector('.advanced-link');
            if (advancedLink) {
              advancedLink.href = '/suscription'; // Redirige a la página de suscripción
              advancedLink.textContent = 'Suscribirse a Premium';
            }
          }
        })
        .catch(error => {
          console.error('Error al obtener el usuario:', error);
        });
    });
  </script>
</html>
